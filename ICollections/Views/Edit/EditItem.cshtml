@model ICollections.ViewModels.EditItemViewModel
@using ICollections.Data
@using Microsoft.EntityFrameworkCore

@{
    var data = ViewBag.db as ApplicationDbContext;

    var collectionId = ViewBag.collectionId;
    var itemId = ViewBag.itemId;

    var editingItem = data!.Items.FindAsync(itemId is int id ? id : 0).Result;
}

<link rel="stylesheet" title="theme" href="#">
<link rel="stylesheet" type="text/css" href="~/css/CreateCollection/CreateCollection.css"/>


<form method="post" action="/Home/EditItem/@collectionId/@itemId" enctype="multipart/form-data">
    
    <div asp-validation-summary="ModelOnly"></div>
    <input type="hidden" name="itemId" value="@itemId" asp-for="ItemId"/>
    
    <div class="input-group mb-3">
        <div class="input-group-prepend">
            <span class="input-group-text lng-CollectionTitle" id="basic-addon1">Title:</span>
        </div>
        <input type="text" class="form-control" name="Title" aria-label="Title" aria-describedby="basic-addon1" value="@editingItem!.Title" asp-for="Title">
        <span asp-validation-for="Title"></span>
    </div>

    <div class="input-group mb-3">
        <div class="input-group-prepend">
            <span class="input-group-text lng-CollectionSmallDescription" id="basic-addon1">Description:</span>
        </div>
        <input type="text" class="form-control" name="Description" aria-label="Description" aria-describedby="basic-addon1" value="@editingItem!.Description" asp-for="Description">
        <span asp-validation-for="Description"></span>
    </div>

    <br/>
    
    @{
        //TODO
        //Add editing for Date, Brand and Comments
    }
    
    <button type="submit" class="btn btn-success lng-Edit" id="text">Create</button>
</form>

<script src="/js/ChangeLanguage.js"></script>
<script src="/js/ChangeTheme.js"></script>
<script src="/js/CreateCollection.js"></script>

<script>   
    let pageTitle = (getCurrentLanguage() === 'en') ? 'Add Item Page - ICollections' : 'Добавление предмета - ICollections';
         
    document.querySelector('title').innerHTML = pageTitle;
</script>
